(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3840"],{Vk22:function(t,e,i){"use strict";var a=i("t3Un");e.a={parking_ll:function(t,e){return Object(a.a)({url:"/service_parking/parking-details/parking_ll/"+t,method:"post",data:e})},addParking:function(t){return Object(a.a)({url:"/service_parking/parking-details",method:"post",data:t})},getParkingList:function(t,e,i,r){return Object(a.a)({url:"/service_parking/parking-details/parkingDetailsFindByProductNo/"+t+"/"+e+"/"+i,method:"post",data:r})},deleteParkingNo:function(t){return Object(a.a)({url:"/service_parking/parking-details/deleteParkingDetails/"+t,method:"delete"})}}},"a+P8":function(t,e,i){"use strict";var a=i("t3Un");e.a={IPToGPS:function(t,e){return Object(a.a)({url:"/service_parking/parking-details/IPToGPS/"+t,method:"post",data:e})},parkingDetailsFindadcode:function(t,e,i,r,o,n,l){return Object(a.a)({url:"/service_parking/parking-details/parkingDetailsFindadcode/"+t+"/"+e+"/"+i+"/"+r+"/"+o+"/"+n,method:"post",data:l})},parkingDetailsFindByAddress:function(t,e){return Object(a.a)({url:"/service_parking/parking-details/parkingDetailsFindByAddress/"+t,method:"post",data:e})},setAppointByParkingNo:function(t,e){return Object(a.a)({url:"/service_parking/parking-details/setAppointByParkingNo/"+t+"/"+e,method:"post"})},addParkingLogs:function(t){return Object(a.a)({url:"/service_parking/parking-logs",method:"post",data:t})}}},gORw:function(t,e,i){"use strict";i.r(e);var a=i("a+P8"),r=i("XPe/"),o=i.n(r),n=i("Vk22"),l={data:function(){return{radio:"0",btnstatus:!0,page:1,limit:10,total:0,ip:"",adcode:"",address:"",longitude:null,latitude:null,addressQuery:{},addressDetailsQuery:{},list:null,dialogFormVisible:!1,form:{parkingNo:"",productNo:"",parkingDetailsNote:"",parkingUsetimeBegin:"",parkingUsetimeEnd:"",appoint:1,logLevel:"2",status:"0",price:"",ownerProductNo:""}}},created:function(){var t=this;n.a.parking_ll(o.a.get("address"),this.addressQuery).then(function(e){t.address=o.a.get("address"),t.adcode=e.data.adcode,t.longitude=e.data.longitude,t.latitude=e.data.latitude,t.getList(),dialogFormVisible=!1})},methods:{submit:function(){var t=this;a.a.parkingDetailsFindByAddress(this.form.parkingDetailsNote,this.addressDetailsQuery).then(function(e){t.form.parkingNo=e.data.parkingNo,t.form.productNo=o.a.get("productNo"),a.a.setAppointByParkingNo(t.form.parkingNo,t.form.appoint).then(function(e){t.$message({type:"success",message:"租用成功!"}),t.getList(),a.a.addParkingLogs(t.form),t.dialogFormVisible=!1})})},orderParking:function(t,e,i){this.dialogFormVisible=!0,this.form.parkingDetailsNote=t,this.form.price=e,this.form.ownerProductNo=i},agreeChange:function(t){this.btnstatus="1"===t,this.getList()},getList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=e,this.listLoading=!0,a.a.parkingDetailsFindadcode(this.page,this.limit,this.adcode,this.longitude,this.latitude,this.radio,this.addressDetailsQuery).then(function(e){t.list=e.data.records,t.total=e.data.total,t.listLoading=!1})}}},s=i("ZrdR"),d=Object(s.a)(l,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-radio-group",{on:{change:t.agreeChange},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[i("el-radio",{attrs:{label:"1"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("查看本市")]),t._v(" "),i("el-radio",{attrs:{label:"0"},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[t._v("查看本区县")])],1),t._v(" "),[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"数据加载中",stripe:"","default-sort":{prop:"distince",order:"descending"}}},[i("el-table-column",{attrs:{label:"序号",width:"70",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s((t.page-1)*t.limit+e.$index+1)+"\n            ")]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"parkingDetailsNote",label:"地址",width:"160",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"price",label:"价格(元/小时)",width:"150",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"distince",label:"距离(米)",width:"100",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{prop:"count",label:"剩余车位",width:"100",sortable:""}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(i){t.orderParking(e.row.parkingDetailsNote,e.row.price,e.row.ownerProductNo)}}},[t._v("预定")]),t._v(" "),i("el-dialog",{attrs:{title:"选择停车位租用时间",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",[i("el-form-item",{attrs:{label:"停车位地址","label-width":t.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:t.form.parkingDetailsNote,callback:function(e){t.$set(t.form,"parkingDetailsNote",e)},expression:"form.parkingDetailsNote"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"租用开始时间","label-width":t.formLabelWidth}},[i("el-time-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择24小时之内的时间"},model:{value:t.form.parkingUsetimeBegin,callback:function(e){t.$set(t.form,"parkingUsetimeBegin",e)},expression:"form.parkingUsetimeBegin"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"租用结束时间","label-width":t.formLabelWidth}},[i("el-time-picker",{attrs:{format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"租用预计结束时间"},model:{value:t.form.parkingUsetimeEnd,callback:function(e){t.$set(t.form,"parkingUsetimeEnd",e)},expression:"form.parkingUsetimeEnd"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确认预约")])],1)],1)]}}])})],1)],t._v(" "),i("el-pagination",{staticStyle:{padding:"30px 0","text-align":"center"},attrs:{"current-page":t.page,"page-size":t.limit,total:t.total,layout:"total, prev, pager, next, jumper"},on:{"current-change":t.getList}})],2)},[],!1,null,null,null);d.options.__file="recommendation.vue";e.default=d.exports}}]);